import"../chunks/DsnmJJEf.js";import{i as ma}from"../chunks/BlwZpCth.js";import{o as fa,e as _a,s as c}from"../chunks/DkHFjrww.js";import{p as ga,f as l,a as S,t as g,b as o,c as ua,s as v,m as u,d as e,g as s,e as i,r,h as J,i as K}from"../chunks/BnT3OJ0g.js";import{i as d}from"../chunks/D4cUk8t7.js";var xa=l("<span>🪙 Bitcoin: <strong> </strong></span>"),ba=l("<span>🪙 Carregando...</span>"),ha=l("<span> </span>"),wa=l("<span>🌡️ Carregando...</span>"),ya=l('<p class="text-center text-red-500 bg-red-100 p-2 rounded"> </p>'),Ca=l('<p class="text-lg animate-pulse">Consultando a API Go...</p>'),Da=l('<p class="text-lg text-red-500"><strong>Erro:</strong> </p>'),ja=l('<div class="space-y-4 text-left"><div><span class="font-semibold">Texto:</span> <span class="font-mono bg-gray-100 p-1 rounded"> </span></div> <div><span class="font-semibold">Horário da Resposta:</span> <span class="text-sm"> </span></div> <div class="pt-4 border-t border-dashed"><p class="text-lg italic text-center text-purple-700"> </p></div></div>'),ka=l('<p class="text-gray-500">Clique no botão para ver os dados.</p>'),Pa=l('<header class="absolute top-0 left-0 right-0 p-4 bg-gray-800 text-white shadow-md"><div class="container mx-auto flex justify-between items-center text-sm"><!> <!></div></header> <main class="flex flex-col items-center justify-center min-h-screen bg-gray-100 text-gray-800 p-4 pt-24"><div class="bg-white p-8 rounded-lg shadow-md max-w-lg w-full"><h1 class="text-3xl font-bold text-center mb-6 text-blue-600">Go + Svelte: API Única</h1> <div class="text-center mb-6"><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors disabled:bg-gray-400"><!></button></div> <!> <div class="mt-4 p-4 border-t border-gray-200 text-center min-h-[150px] flex items-center justify-center"><!></div></div></main>',1);function Ea(Q,U){ga(U,!1);let p=u(null),h=u(null),x=u(!1),C=u(null),w=u(null),D=u(null);async function V(){v(x,!0),v(h,null),v(p,null);try{const a=await fetch("http://localhost:8080/api/mensagem");if(!a.ok)throw new Error("Falha ao conectar na API.");v(p,await a.json())}catch(a){v(h,a.message)}finally{v(x,!1)}}fa(async()=>{try{const[a,t]=await Promise.all([fetch("http://localhost:8080/api/bitcoin"),fetch("http://localhost:8080/api/clima")]);if(a.ok){const n=await a.json();v(C,n.bitcoin.brl)}if(t.ok){const n=await t.json();v(w,n.current_condition[0])}}catch(a){v(D,"Não foi possível carregar os dados do cabeçalho. O backend está rodando?"),console.error(a)}}),ma();var E=Pa(),j=S(E),F=e(j),G=e(F);{var W=a=>{var t=xa(),n=i(e(t)),P=e(n);r(n),r(t),g(R=>c(P,`R$ ${R??""}`),[()=>s(C).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]),o(a,t)},X=a=>{var t=ba();o(a,t)};d(G,a=>{s(C)?a(W):a(X,!1)})}var Y=i(G,2);{var Z=a=>{var t=ha(),n=e(t);r(t),g(()=>c(n,`🌡️ ${s(w).temp_C??""}°C, ${s(w).weatherDesc[0].value??""}`)),o(a,t)},$=a=>{var t=wa();o(a,t)};d(Y,a=>{s(w)?a(Z):a($,!1)})}r(F),r(j);var L=i(j,2),M=e(L),k=i(e(M),2),y=e(k),aa=e(y);{var ta=a=>{var t=J("Buscando...");o(a,t)},ea=a=>{var t=J("Buscar Dados do Servidor");o(a,t)};d(aa,a=>{s(x)?a(ta):a(ea,!1)})}r(y),r(k);var q=i(k,2);{var ra=a=>{var t=ya(),n=e(t,!0);r(t),g(()=>c(n,s(D))),o(a,t)};d(q,a=>{s(D)&&a(ra)})}var H=i(q,2),sa=e(H);{var oa=a=>{var t=Ca();o(a,t)},na=a=>{var t=K(),n=S(t);{var P=m=>{var f=Da(),B=i(e(f));r(f),g(()=>c(B,` ${s(h)??""}`)),o(m,f)},R=m=>{var f=K(),B=S(f);{var ia=_=>{var b=ja(),A=e(b),N=i(e(A),2),va=e(N);r(N),r(A);var I=i(A,2),O=i(e(I),2),ca=e(O,!0);r(O),r(I);var T=i(I,2),z=e(T),da=e(z);r(z),r(T),r(b),g(pa=>{c(va,`"${s(p).texto??""}"`),c(ca,pa),c(da,`"${s(p).frase??""}"`)},[()=>new Date(s(p).timestamp).toLocaleString("pt-BR")]),o(_,b)},la=_=>{var b=ka();o(_,b)};d(B,_=>{s(p)?_(ia):_(la,!1)},!0)}o(m,f)};d(n,m=>{s(h)?m(P):m(R,!1)},!0)}o(a,t)};d(sa,a=>{s(x)?a(oa):a(na,!1)})}r(H),r(M),r(L),g(()=>y.disabled=s(x)),_a("click",y,V),o(Q,E),ua()}export{Ea as component};
